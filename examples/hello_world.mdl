// Hello World example with scope selectors
pack "hello_world" "A simple hello world datapack" 15;
namespace "hello_world";

// Global counter accessible by all players
var num globalCounter<@a> = 0;

function "main" {
    // Increment global counter
    globalCounter<@a> = globalCounter<@a> + 1;
    
    say Hello, Minecraft!;
    tellraw @a {"text":"Welcome to my datapack!","color":"green"};
    say Global counter: $globalCounter$;
    // Call greet_player with macro data using compound
    exec hello_world:greet_player<@s> "{name:Alex,times:3}";
}

function "greet_player" {
    // Player-specific greeting
    say Welcome, player! You are visitor number $globalCounter$;
    // Function Macro example: use $(name) and $(times)
    $ say Hello $(name) x$(times);
}

on_load "hello_world:main";
on_tick "hello_world:greet_player<@a>";
// Demonstrate with-clause call as well
// exec hello_world:greet_player<@a> with storage my:data player.info
